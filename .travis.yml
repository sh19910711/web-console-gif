language: node_js
node_js: "4.4.5"
cache:
  directories:
    - node_modules
    - vendor/bundle

install:
  - rvm install 2.3.1 --install --binary --fuzzy
  - npm install
  - cd web-console && bundle install --path $TRAVIS_BUILD_DIR/vendor/bundle -j4
  - cd $TRAVIS_BUILD_DIR

before_script:
  - source ./script/xvfb.source.bash

script:
  - bash ./script/dummy.bash
  - cd $TRAVIS_BUILD_DIR
  - pwd
  - sleep 10
  - curl http://localhost:19292 | grep console
  - mkdir tmp
  - npm test
  - ls tmp/
